(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=require("path");var n=e.n(t);const r=require("fs");var a=e.n(r);const o=require("react");var c=e.n(o);const s=require("express");var l=e.n(s);const i=require("react-dom/server");var u=e.n(i);const m=require("isomorphic-fetch");var d=e.n(m);const p=require("react-html-parser");var f=e.n(p);const g=require("react-router-dom"),v=function(e){var t=e.posts;return c().createElement("div",{className:"posts"},t?t.map((function(e){return c().createElement("div",{className:"card",key:e.id},c().createElement("img",{src:e._embedded["wp:featuredmedia"][0].source_url,className:"card__image",alt:"Image"}),c().createElement("div",{className:"container"},c().createElement("h4",null,c().createElement("b",null,f()(e.title.rendered))),f()(e.excerpt.rendered),c().createElement("button",{className:"btn"},c().createElement(g.Link,{to:"/post/".concat(e.id),onClick:function(){localStorage.setItem("post",JSON.stringify(e))}},"Read More"))))})):c().createElement("h1",null,"Loading"))},h=function(){var e=JSON.parse(localStorage.getItem("post"));return console.log(e),c().createElement("div",{className:"post"},f()(e.content.rendered))},b=function(){return c().createElement("nav",{className:"navbar"},c().createElement(g.Link,{to:"/"},"WP-DECOUPLED"))};function y(e,t){var n=t.join(","),r=0;return d()("https://www.houstonzoo.org/wp-json/wp/v2/posts?_embed&per_page=4&page=".concat(e,"\n\t\t\t\t\t").concat(t.length>0?"&categories=".concat(n):"")).then((function(e){return r=e.headers.get("X-WP-TotalPages"),e.json()})).then((function(e){return{posts:e,totalPagesData:r}}))}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,s=e[Symbol.iterator]();!(r=(c=s.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}}(e,t)||w(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const N=function(e){var t=e.postData,n=e.categories,r=e.totalPagesData,a=E((0,o.useState)(t),2),s=a[0],l=a[1],i=E((0,o.useState)(1),2),u=i[0],m=i[1],d=E((0,o.useState)(r),2),p=d[0],f=d[1],N=E((0,o.useState)([]),2),_=N[0],P=N[1],j=E((0,o.useState)("categories__filter"),2),O=j[0],D=j[1],k=function(e){m(e),y(e,_).then((function(e){l(e.posts),f(e.totalPagesData)})).catch((function(e){return console.log(e)}))};return console.log(p),c().createElement("div",null,c().createElement(b,null),c().createElement(g.Switch,null,c().createElement(g.Route,{exact:!0,path:"/"},c().createElement("div",{className:"filter__button"},c().createElement("button",{className:"",onClick:function(){D("categories__filter"===O?"categories__filter show":"categories__filter"),""===event.target.className?event.target.className="selected":event.target.className=""}},"CATEGORIES FILTERS")),c().createElement("div",{className:O},null==n?void 0:n.map((function(e){return c().createElement("p",{key:e.id,className:"category ".concat(_.includes(e.id)?"selected":""),onClick:function(t){"category"===t.target.className?t.target.className="category selected":t.target.className="category",function(e,t){var n,r=function(e){if(Array.isArray(e))return S(e)}(n=_)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(n)||w(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=r.indexOf(t);-1!==a?r.splice(a,1):r.push(t),console.log("up",r),P(r)}(0,e.id)}},e.name)})),c().createElement("button",{className:"btn",onClick:function(e){e.preventDefault(),m(1),console.log(_),y(1,_).then((function(e){console.log(e),l(e.posts),f(e.totalPagesData)})).catch((function(e){return console.log(e)}))}},"Apply Filters ")),c().createElement(v,{posts:s}),c().createElement("div",{className:"pagination"},c().createElement("button",{className:"btn",onClick:function(e){k(u-1)},disabled:1===u},"Previous"),c().createElement("button",{className:"btn",onClick:function(){k(u+1)},disabled:u==p},"Next"))),c().createElement(g.Route,{path:"/post/:id"},c().createElement(h,null))))};var _=process.env.PORT||3e3,P=l()();P.get("/",(function(e,t){d()("https://www.houstonzoo.org/wp-json/wp/v2/categories?per_page=100").then((function(e){return e.json()})).then((function(r){var o;(o=0,d()("https://www.houstonzoo.org/wp-json/wp/v2/posts?_embed&per_page=4").then((function(e){return o=e.headers.get("X-WP-TotalPages"),e.json()})).then((function(e){return{posts:e,totalPagesData:o}}))).then((function(o){var s={},l=u().renderToString(c().createElement(g.StaticRouter,{location:e.url,context:s},c().createElement(N,{postData:o.posts,categories:r,totalPagesData:o.totalPagesData})));if(s.url)redirect(e.url);else{var i=n().resolve("./build/index.html");a().readFile(i,"utf8",(function(e,n){return e?(console.error("Something went wrong:",e),t.status(500).send("Oops, better luck next time!")):t.send(n.replace('<div id="root"></div>','<div id="root">'.concat(l,"</div>")))}))}}))}))})),P.use(l().static("./build")),P.listen(_,(function(){console.log("Server is listening on port ".concat(_))}))})();